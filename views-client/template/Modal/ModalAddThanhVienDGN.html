<div ng-init="OnLoad()">
    <div class="modal-header bg-color" style="background-color:#ccc">
        <div class="modal-title">
            <a title="Đóng" style="opacity:1 !important" ng-click="cancelModal()" class="close" aria-hidden="true"> </a>

            <h4> <label class=" uppercase font-white"><i class="fa fa-list"></i> Tìm kiếm và chọn thành viên đoàn ĐGN </label></h4>

        </div>
    </div>
    <div class="modal-body form">
        <div class="form-body form-horizontal margin-top-10">
            <div class="row margin-bottom-5">
                <label class="control-label col-md-2">Phòng/Trường(thuộc Sở): </label>
                <div class="col-md-4">
                    <select ng-model="filter.IdPhong" class="form-control input-sm select2"
                            convert-to-number
                            ng-change="LoadDonViCon(filter.IdPhong,'ListTruong')">
                        <option value="{{CurDonVi.Id}}">---Tất cả thành viên trực thuộc Sở---</option>
                        <option ng-repeat="nl in ListPhong" value={{nl.Id}}>{{nl.TenDonVi}}</option>
                    </select>
                </div>
                <div ng-show="ListTruong.length > 0">
                    <label class="control-label col-md-2">Trường: </label>
                    <div class="col-md-4">
                        <select ng-model="filter.IdTruong"
                                class="form-control input-sm select2"
                                convert-to-number
                                ng-change="LoadListUserByDonVi(filter.IdTruong)">
                            <option ng-repeat="nl in ListTruong" value={{nl.Id}}>{{nl.TenDonVi}}</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="row margin-bottom-5">
                <div class="col-md-12 text-right">
                    <b><i>Đã chọn {{DSThanhVienDGN.length}} thành viên</i></b>
                </div>
            </div>
            <div class="row margin-bottom-5">
                <div class="table-scrollable">
                    <table class="table table-striped table-bordered table-hover">
                        <thead>
                            <tr>
                                <th> # </th>
                                <th> Họ và tên </th>
                                <th> Chức vụ </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="odd gradeX" ng-repeat="tv in ListTV">
                                <td width="1px">
                                    <input type="checkbox" ng-model="tv.check" 
                                           ng-change="OnCheckUser(tv)"/>
                                </td>
                                <td>{{tv.HoTen}}</td>
                                <td> {{tv.ChucVu}} </td>
                                
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="form-group " style="position: sticky;bottom: 10px;z-index:500;background-color:white">
                <div class="col-md-4 text-right">
                    <div style="margin-top:7px"><i>Lưu ý: <span style="color:red">*</span> Bắt buộc nhập</i></div>
                </div>
                <div class="col-md-8 clearfix text-right">
                    <a class="btn btn-sm btn-success btn-outline sbold action-btn" ng-click="cancelModal()">
                        <i class="fa fa-save"></i> Lưu thành viên
                    </a>
                    <a class="btn btn-sm grey-cascade" ng-click="cancelModal()"><i class="fa fa-times-circle"></i> Đóng </a>
                </div>

            </div>
        </div>
    </div>
</div>


<script>
    jQuery(document).ready(function () {
        ComponentsSelect2.init();
    });
</script>
